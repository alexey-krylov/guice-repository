*guice-repository* adapted version of [http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/orm/jpa/support/OpenEntityManagerInViewFilter.html OpenEntityManagerInViewFilter]. This filter binds a JPA EntityManager to the thread for the entire processing of the request. Intended for the "Open EntityManager in View"/session-in-view/session-per-http-request pattern, i.e. to allow for lazy loading in web views despite the original transactions already being completed.
To be able to use mentioned above pattern, register this filter once in your _Guice ServletModule_. It is important that you register this filter before any other filter.
Example configuration:
{{{
   public class MyModule extends ServletModule {
     public void configureServlets() {
       filter("/*").through(PersistFilter.class);
       serve("/index.html").with(MyHtmlServlet.class);
       // Etc.
     }
   }
}}}
  
For single persistence unit you can configure your filter with setPersistenceUnitName(String) (through web.xml/programmatically). Also you can just skip this parameter - in this case default persistence (PersistenceUnitsConfigurationManager.getDefaultConfiguration()) unit configuration will be used.

For multiple persistence units, you should register your custom filter before this filter. Your custom filter should set parameter "persistenceUnitName" into HttpServletRequest.
This filter requires the [http://code.google.com/p/google-guice/wiki/Servlets Guice Servlet] extension.

Also it's recommended to read about [http://code.google.com/p/google-guice/wiki/JPA original PersistFilter] from _guice-persist extension_.